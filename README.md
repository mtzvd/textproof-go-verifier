# TextProof

## –°–∏—Å—Ç–µ–º–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ —Ç–µ–∫—Å—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–ª–æ–∫—á–µ–π–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

TextProof ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ö–µ—à–∏ –∏ Proof-of-Work –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–π –∑–∞–ø–∏—Å–∏ –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.

[![Go Version](https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat&logo=go)](https://golang.org)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–î–µ–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤** ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ –≤–∞—à–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏** ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ ID –∏–ª–∏ –ø–æ–ª–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- **–ë–ª–æ–∫—á–µ–π–Ω —Å Proof-of-Work** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ —á–µ—Ä–µ–∑ –º–∞–π–Ω–∏–Ω–≥ –±–ª–æ–∫–æ–≤
- **–ù–∞–¥—ë–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Äî WAL (Write-Ahead Logging) + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- **QR-–∫–æ–¥—ã** ‚Äî –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **–í—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –±–µ–π–¥–∂–∏** ‚Äî HTML-–≤–∏–¥–∂–µ—Ç—ã –¥–ª—è —Å–∞–π—Ç–æ–≤
- **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** ‚Äî O(1) –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI** ‚Äî Bulma CSS + Alpine.js

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [Go](https://golang.org/dl/) 1.21 –∏–ª–∏ –Ω–æ–≤–µ–µ
- [Templ](https://templ.guide/) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git https://github.com/mtzvd/textproof-go-verifier.git
cd textproof

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod download

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ templ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
go install github.com/a-h/templ/cmd/templ@latest

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω—ã
templ generate

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
go run cmd/server/main.go
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: **<http://localhost:8080>**

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–µ–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/deposit`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –ò–º—è –∞–≤—Ç–æ—Ä–∞ (–§–ò–û –∏–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º)
   - –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏
3. –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ –±–ª–æ–∫—á–µ–π–Ω–µ"
4. –ü–æ–ª—É—á–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏ QR-–∫–æ–¥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—Å—Ç–∞

**–ü–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/verify`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ü–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É"
3. –í–≤–µ–¥–∏—Ç–µ ID –±–ª–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `000-000-001`)
4. –ü–æ–ª—É—á–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—Å—Ç–µ

**–ü–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/verify`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ü–æ —Ç–µ–∫—Å—Ç—É"
3. –í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞
4. –°–∏—Å—Ç–µ–º–∞ –≤—ã—á–∏—Å–ª–∏—Ç —Ö–µ—à –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ

**–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞:**

- –û—Ç–∫—Ä–æ–π—Ç–µ `/verify/{id}` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```go
textproof/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ       ‚îî‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ api/                     # HTTP handlers –∏ –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ flash.go             # Flash messages (cookies)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ map_stats.go
‚îÇ   ‚îú‚îÄ‚îÄ blockchain/              # –õ–æ–≥–∏–∫–∞ –±–ª–æ–∫—á–µ–π–Ω–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ block.go             # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ blockchain.go        # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ü–µ–ø–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.go           # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.go            # –¢–∏–ø—ã –æ—à–∏–±–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ id_generator.go      # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –±–ª–æ–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ config/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go
‚îÇ   ‚îî‚îÄ‚îÄ viewmodels/              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è UI
‚îÇ       ‚îú‚îÄ‚îÄ types.go
‚îÇ       ‚îú‚îÄ‚îÄ navbar.go
‚îÇ       ‚îî‚îÄ‚îÄ build-navbar.go
‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îú‚îÄ‚îÄ static/                  # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ app.js
‚îÇ   ‚îî‚îÄ‚îÄ templates/               # Templ —à–∞–±–ª–æ–Ω—ã
‚îÇ       ‚îú‚îÄ‚îÄ base.templ
‚îÇ       ‚îú‚îÄ‚îÄ home.templ
‚îÇ       ‚îú‚îÄ‚îÄ deposit.templ
‚îÇ       ‚îú‚îÄ‚îÄ deposit_result_page.templ
‚îÇ       ‚îú‚îÄ‚îÄ verify.templ
‚îÇ       ‚îú‚îÄ‚îÄ verify_result.templ
‚îÇ       ‚îî‚îÄ‚îÄ components/          # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ data/                        # –î–∞–Ω–Ω—ã–µ –±–ª–æ–∫—á–µ–π–Ω–∞ (–Ω–µ –≤ git)
‚îÇ   ‚îú‚îÄ‚îÄ blockchain.json          # –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ø—å
‚îÇ   ‚îú‚îÄ‚îÄ wal.json                 # Write-Ahead Log
‚îÇ   ‚îî‚îÄ‚îÄ backups/                 # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ modd.conf                    # Hot reload –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

### –ë–ª–æ–∫—á–µ–π–Ω

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫–∞:**

```go
type Block struct {
    ID        string       // "000-000-001"
    PrevHash  string       // –•–µ—à –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –±–ª–æ–∫–∞
    Timestamp time.Time    // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    Data      DepositData  // –î–∞–Ω–Ω—ã–µ –æ —Ç–µ–∫—Å—Ç–µ
    Nonce     int          // Proof-of-Work nonce
    Hash      string       // SHA-256 —Ö–µ—à –±–ª–æ–∫–∞
}

type DepositData struct {
    AuthorName  string  // –ò–º—è –∞–≤—Ç–æ—Ä–∞
    Title       string  // –ù–∞–∑–≤–∞–Ω–∏–µ
    TextStart   string  // –ü–µ—Ä–≤—ã–µ 3 —Å–ª–æ–≤–∞
    TextEnd     string  // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 3 —Å–ª–æ–≤–∞
    ContentHash string  // SHA-256 —Ö–µ—à –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
    PublicKey   string  // (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
}
```

**Proof-of-Work:**

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 4 –Ω—É–ª—è)
- –ú–∞–π–Ω–∏–Ω–≥ –±–ª–æ–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ –ø—Ä–æ—à–ª—ã—Ö –∑–∞–ø–∏—Å–µ–π

**–•—Ä–∞–Ω–µ–Ω–∏–µ:**

- JSON —Ñ–∞–π–ª—ã –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã
- WAL –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–±–æ–µ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã (—Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5)
- Atomic write —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```bash
go run cmd/server/main.go [–æ–ø—Ü–∏–∏]

–û–ø—Ü–∏–∏:
  -data-dir string
        –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (default "data")
  -port int
        –ü–æ—Ä—Ç –¥–ª—è HTTP —Å–µ—Ä–≤–µ—Ä–∞ (default 8080)
  -difficulty int
        –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∞–π–Ω–∏–Ω–≥–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–π) (default 4)
  -debug
        –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
```

### –ü—Ä–∏–º–µ—Ä—ã

```bash
# –ó–∞–ø—É—Å–∫ –Ω–∞ –ø–æ—Ä—Ç—É 9090 —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ ./my_data
go run cmd/server/main.go -data-dir ./my_data -port 9090

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
go run cmd/server/main.go -difficulty 3 -debug
```

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### Hot Reload —Å modd

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ modd
go install github.com/cortesi/modd/cmd/modd@latest

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
modd
```

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `.templ` —Ñ–∞–π–ª–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è `templ generate` –∏ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| GET | `/` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ |
| GET | `/deposit` | –§–æ—Ä–º–∞ –¥–µ–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| POST | `/api/deposit` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| GET | `/deposit/result/{id}` | –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| GET | `/verify` | –§–æ—Ä–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ |
| POST | `/api/verify/id` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ ID |
| POST | `/api/verify/text` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ç–µ–∫—Å—Ç—É |
| GET | `/verify/result/{id}` | –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ |
| GET | `/verify/{id}` | –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É |
| GET | `/api/qrcode/{id}` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞ |
| GET | `/api/badge/{id}` | HTML-–±–µ–π–¥–∂ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è |
| GET | `/api/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫—á–µ–π–Ω–∞ |

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã

- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π
- ‚úÖ **HttpOnly cookies** ‚Äî –∑–∞—â–∏—Ç–∞ flash messages –æ—Ç XSS
- ‚úÖ **Proof-of-Work** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
- ‚úÖ **Content hash index** ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ **Atomic writes** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

- ‚ö†Ô∏è –î–æ–±–∞–≤—å—Ç–µ **rate limiting** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ middleware)
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **HTTPS** (TLS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **CSRF –∑–∞—â–∏—Ç—É**
- ‚ö†Ô∏è –î–æ–±–∞–≤—å—Ç–µ **–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (zerolog, zap)
- ‚ö†Ô∏è –†–µ–∞–ª–∏–∑—É–π—Ç–µ **–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (Prometheus + Grafana)
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **—Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü–∏—è | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è |
| --- | --- | --- |
| –ü–æ–∏—Å–∫ –ø–æ ID | O(n) | ~1ms –¥–ª—è 1000 –±–ª–æ–∫–æ–≤ |
| –ü–æ–∏—Å–∫ –ø–æ —Ö–µ—à—É | O(1) | <1ms (–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è) |
| –ú–∞–π–Ω–∏–Ω–≥ –±–ª–æ–∫–∞ | - | ~2-5s (difficulty=4) |
| –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–ø–∏ | O(n) | ~10ms –¥–ª—è 1000 –±–ª–æ–∫–æ–≤ |

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
go test ./...

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
go test -cover ./...

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out
```

---

## TODO / Roadmap

- [ ] –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è blockchain
- [ ] –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã –¥–ª—è API
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL/MySQL –≤–º–µ—Å—Ç–æ JSON
- [ ] API –∫–ª—é—á–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –±–ª–æ–∫—á–µ–π–Ω–∞ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π (ECDSA, RSA)
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [ ] CI/CD pipeline (GitHub Actions)
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
- [ ] Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## Contributing

Contributions are welcome! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. Fork –ø—Ä–æ–µ–∫—Ç
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª `LICENSE` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

## üë§ –ê–≤—Ç–æ—Ä

### **–ì–µ–æ—Ä–≥–∏–π –ê–≥–∞—Ñ–æ–Ω–æ–≤**

- GitHub: [@mtzvd](https://github.com/mtzvd)
- Email: <info@web-n-roll.pl>

---

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [Bulma](https://bulma.io/) ‚Äî CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [Alpine.js](https://alpinejs.dev/) ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π JS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [Templ](https://templ.guide/) ‚Äî type-safe —à–∞–±–ª–æ–Ω—ã –¥–ª—è Go
- [Gorilla Mux](https://github.com/gorilla/mux) ‚Äî HTTP —Ä–æ—É—Ç–µ—Ä
- [go-qrcode](https://github.com/skip2/go-qrcode) ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Go](https://golang.org/doc/)
- [Templ Guide](https://templ.guide/)
- [Blockchain Basics](https://en.wikipedia.org/wiki/Blockchain)

---

**‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è ‚Äî –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!**

# TextProof

## Text Authorship Proof System Using Blockchain Technology

TextProof is a web application for recording authorship of text documents in a blockchain. The system uses cryptographic hashes and Proof-of-Work to create an immutable record of a text's existence at a specific point in time.

[![Go Version](https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat&logo=go)](https://golang.org)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

---

## Features

- **Text Deposit** ‚Äî Record the authorship of your text in the blockchain
- **Authenticity Verification** ‚Äî Verify a text by ID or by its full content
- **Proof-of-Work Blockchain** ‚Äî Protection against forgery through block mining
- **Reliable Storage** ‚Äî WAL (Write-Ahead Logging) + automatic backups
- **QR Codes** ‚Äî For quick verification on mobile devices
- **Embeddable Badges** ‚Äî HTML widgets for websites
- **Fast Search** ‚Äî O(1) duplicate search via indexing
- **Modern UI** ‚Äî Bulma CSS + Alpine.js

---

## Quick Start

### Requirements

- [Go](https://golang.org/dl/) 1.21 or newer
- [Templ](https://templ.guide/) for template generation

### Installation

# Clone the repository

```bash
git https://github.com/mtzvd/textproof-go-verifier.git
cd textproof
```

# Install dependencies

```bash
go mod download
```

# Install templ (if not already installed)

```bash
go install github.com/a-h/templ/cmd/templ@latest
```

# Generate templates

```bash
templ generate
```

# Start the server

```bash
go run cmd/server/main.go
```

The application will be available at: **<http://localhost:8080>**

---

## Usage

### Depositing Text

1. Go to `/deposit`
2. Fill out the form:
   - Author's name (full name or pseudonym)
   - Work title
   - Full text of the document
   - (Optional) Public key for digital signature
3. Click "Record in Blockchain"
4. Receive a unique ID and QR code

### Verifying Text

**By identifier:**

1. Go to `/verify`
2. Select the "By Identifier" tab
3. Enter the block ID (e.g., `000-000-001`)
4. Get information about the text

**By content:**

1. Go to `/verify`
2. Select the "By Text" tab
3. Paste the full text of the document
4. The system will compute the hash and check its presence in the blockchain

**Direct link:**

- Open `/verify/{id}` for automatic verification

---

## Architecture

### Project Structure

```text
textproof/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ       ‚îî‚îÄ‚îÄ main.go              # Application entry point
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ api/                     # HTTP handlers and routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ flash.go             # Flash messages (cookies)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ map_stats.go
‚îÇ   ‚îú‚îÄ‚îÄ blockchain/              # Blockchain logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ block.go             # Block structure
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ blockchain.go        # Main chain logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.go           # File operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.go            # Error types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ id_generator.go      # Block ID generator
‚îÇ   ‚îú‚îÄ‚îÄ config/                  # Configuration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go
‚îÇ   ‚îî‚îÄ‚îÄ viewmodels/              # Data models for UI
‚îÇ       ‚îú‚îÄ‚îÄ types.go
‚îÇ       ‚îú‚îÄ‚îÄ navbar.go
‚îÇ       ‚îî‚îÄ‚îÄ build-navbar.go
‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îú‚îÄ‚îÄ static/                  # Static files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ app.js
‚îÇ   ‚îî‚îÄ‚îÄ templates/               # Templ templates
‚îÇ       ‚îú‚îÄ‚îÄ base.templ
‚îÇ       ‚îú‚îÄ‚îÄ home.templ
‚îÇ       ‚îú‚îÄ‚îÄ deposit.templ
‚îÇ       ‚îú‚îÄ‚îÄ deposit_result_page.templ
‚îÇ       ‚îú‚îÄ‚îÄ verify.templ
‚îÇ       ‚îú‚îÄ‚îÄ verify_result.templ
‚îÇ       ‚îî‚îÄ‚îÄ components/          # Reusable components
‚îú‚îÄ‚îÄ data/                        # Blockchain data (not in git)
‚îÇ   ‚îú‚îÄ‚îÄ blockchain.json          # Main chain
‚îÇ   ‚îú‚îÄ‚îÄ wal.json                 # Write-Ahead Log
‚îÇ   ‚îî‚îÄ‚îÄ backups/                 # Automatic backups
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ modd.conf                    # Hot reload configuration
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

### Blockchain

**Block structure:**

```go
type Block struct {
    ID        string       // "000-000-001"
    PrevHash  string       // Hash of the previous block
    Timestamp time.Time    // Creation time
    Data      DepositData  // Text data
    Nonce     int          // Proof-of-Work nonce
    Hash      string       // SHA-256 block hash
}

type DepositData struct {
    AuthorName  string  // Author's name
    Title       string  // Title
    TextStart   string  // First 3 words
    TextEnd     string  // Last 3 words
    ContentHash string  // SHA-256 hash of the full text
    PublicKey   string  // (Optional) Public key
}
```

**Proof-of-Work:**

- Configurable difficulty (default: 4 leading zeros)
- Block mining takes a few seconds
- Protection against forgery of past records

**Storage:**

- JSON files for simplicity
- WAL for crash protection
- Automatic backups (last 5 are kept)
- Atomic writes via temporary files

---

## Configuration

### Command Line Flags

```bash
go run cmd/server/main.go [options]
```

Options:
  -data-dir string
        Data storage directory (default "data")
  -port int
        Port for HTTP server (default 8080)
  -difficulty int
        Mining difficulty (number of zeros) (default 4)
  -debug
        Enable debug mode

### Examples

# Run on port 9090 with data in ./my_data

```bash
go run cmd/server/main.go -data-dir ./my_data -port 9090
```

# Run with reduced difficulty for testing

```bash
go run cmd/server/main.go -difficulty 3 -debug
```
---

## Development

### Hot Reload with modd

# Install modd

```bash
go install github.com/cortesi/modd/cmd/modd@latest
```

# Run with auto-reload

```bash
modd
```

When `.templ` files change, `templ generate` will run automatically and the server will restart.

### API Structure

| Method | Path | Description |
| --- | --- | --- |
| GET | `/` | Home page |
| GET | `/deposit` | Deposit form |
| POST | `/api/deposit` | Deposit processing |
| GET | `/deposit/result/{id}` | Deposit result |
| GET | `/verify` | Verification form |
| POST | `/api/verify/id` | Verify by ID |
| POST | `/api/verify/text` | Verify by text |
| GET | `/verify/result/{id}` | Verification result |
| GET | `/verify/{id}` | Direct verification link |
| GET | `/api/qrcode/{id}` | QR code generation |
| GET | `/api/badge/{id}` | HTML badge for embedding |
| GET | `/api/stats` | Blockchain statistics |

---

## Security

### Implemented Measures

- ‚úÖ **Input validation** ‚Äî maximum text length, field validation
- ‚úÖ **HttpOnly cookies** ‚Äî protection of flash messages from XSS
- ‚úÖ **Proof-of-Work** ‚Äî protection against spam
- ‚úÖ **Content hash index** ‚Äî prevention of duplicates
- ‚úÖ **Atomic writes** ‚Äî protection against data corruption

### Recommendations for Production

- ‚ö†Ô∏è Add **rate limiting** (e.g., via middleware)
- ‚ö†Ô∏è Use **HTTPS** (TLS certificates)
- ‚ö†Ô∏è Configure **CSRF protection**
- ‚ö†Ô∏è Add **logging** (zerolog, zap)
- ‚ö†Ô∏è Implement **monitoring** (Prometheus + Grafana)
- ‚ö†Ô∏è Set up data **backup**

---

## Performance

| Operation | Complexity | Time |
| --- | --- | --- |
| Search by ID | O(n) | ~1ms for 1000 blocks |
| Search by hash | O(1) | <1ms (indexing) |
| Block mining | - | ~2-5s (difficulty=4) |
| Chain validation | O(n) | ~10ms for 1000 blocks |

---

## Testing

# Run all tests

```bash
go test ./...
```

# Tests with coverage

```bash
go test -cover ./...
```

# Generate coverage report

```bash
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out
```

---

## TODO / Roadmap

- [ ] Add unit tests for blockchain
- [ ] Add integration tests for API
- [ ] Implement rate limiting
- [ ] Add structured logging
- [ ] Support PostgreSQL/MySQL instead of JSON
- [ ] API keys for automation
- [ ] Export blockchain in various formats
- [ ] Support for digital signatures (ECDSA, RSA)
- [ ] Docker containerization
- [ ] CI/CD pipeline (GitHub Actions)
- [ ] Prometheus metrics
- [ ] Swagger/OpenAPI documentation

---

## Contributing

Contributions are welcome! Please:

1. Fork the project
2. Create a feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## License

This project is distributed under the MIT license. See the `LICENSE` file for details.

---

## üë§ Author

### **Georgiy Agafonov**

- GitHub: [@mtzvd](https://github.com/mtzvd)
- Email: <info@web-n-roll.pl>

---

## Acknowledgments

- [Bulma](https://bulma.io/) ‚Äî CSS framework
- [Alpine.js](https://alpinejs.dev/) ‚Äî lightweight JS framework
- [Templ](https://templ.guide/) ‚Äî type-safe templates for Go
- [Gorilla Mux](https://github.com/gorilla/mux) ‚Äî HTTP router
- [go-qrcode](https://github.com/skip2/go-qrcode) ‚Äî QR code generation

---

## Additional Resources

- [Go Documentation](https://golang.org/doc/)
- [Templ Guide](https://templ.guide/)
- [Blockchain Basics](https://en.wikipedia.org/wiki/Blockchain)

---

**‚≠ê If you like the project ‚Äî give it a star on GitHub!**